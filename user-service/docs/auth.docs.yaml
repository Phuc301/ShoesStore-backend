paths:
  /auth/register:
    post:
      tags: [Auth]
      summary: Register a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - fullName
                - email
                - password
              properties:
                fullName:
                  type: string
                email:
                  type: string
                password:
                  type: string
      responses:
        '201':
          description: Register successful
        '400':
          description: Bad request (validation errors, duplicate email, etc.)

  /auth/login:
    post:
      tags: [Auth]
      summary: Login user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                password:
                  type: string
      responses:
        '200':
          description: Login successful
        '401':
          description: Invalid credentials

  /auth/refresh-token:
    post:
      tags: [Auth]
      summary: Refresh access token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
      responses:
        '200':
          description: Token refreshed successfully
        '403':
          description: Invalid or expired refresh token

  /auth/logout:
    post:
      tags: [Auth]
      summary: Logout user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - accessToken
                - refreshToken
              properties:
                accessToken:
                  type: string
                refreshToken:
                  type: string
      responses:
        '200':
          description: Logout successful

  /auth/change-password:
    post:
      tags: [Auth]
      summary: Change password
      parameters:
        - name: X-User-Id
          in: header
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - oldPassword
                - newPassword
              properties:
                oldPassword:
                  type: string
                newPassword:
                  type: string
      responses:
        '200':
          description: Password changed successfully
        '400':
          description: Validation error
        '401':
          description: Unauthorized

  /auth/reset-password:
    post:
      tags: [Auth]
      summary: Reset password
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - newPassword
              properties:
                email:
                  type: string
                newPassword:
                  type: string
      responses:
        '200':
          description: Password reset successfully
        '400':
          description: Bad request (invalid email, validation error)

  /auth/guest:
    post:
      tags: [Auth]
      summary: Find or create a guest account
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - fullName
              properties:
                email:
                  type: string
                fullName:
                  type: string
      responses:
        '200':
          description: Guest account found or created successfully
        '400':
          description: Bad request (validation errors, etc.)

  /auth/google:
    get:
      tags: [Auth]
      summary: Login with Google (redirect)
      description: |
        Redirects the user to Google for authentication.
      responses:
        '302':
          description: Redirect to Google OAuth login page

  /auth/google/callback:
    get:
      tags: [Auth]
      summary: Google OAuth callback
      description: |
        Google redirects back to this endpoint after successful authentication.
        The server processes the Google profile, creates/updates the user, and returns JWT tokens.
      responses:
        '200':
          description: Google login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  accessToken:
                    type: string
                  refreshToken:
                    type: string
                  user:
                    type: object
                    properties:
                      id:
                        type: string
                      fullName:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
                      loyaltyPoints:
                        type: number
                      avatarUrl:
                        type: string
                      isVerified:
                        type: boolean
                      isActive:
                        type: boolean
        '400':
          description: Google login failed
